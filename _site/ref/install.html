<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Experiments with Minix Operating System : Minix installation</title>
        <meta name="description" content="Implementing Immediate files">

        <link href="/css/bootmin.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class=row-fluid>
                <div id=header class=span12>
                    <h4><a class=brand href="/">Experiments with Minix Operating System</a>
    <small>Implementing Immediate files</small>
</h4>


                </div>
            </div>

            <div class=row-fluid>
                
                
                    <div id=navigation class=span2>
                        <ul class="nav nav-list">
    <li><a href="/">Home</a></li>
    
        
        

        
            
                <li class=nav-header>Documentation</li>
            
            <li data-order="6"><a href="/doc/tips-tricks.html">Tricks of the trade <br />  </a></li>
        
            
            <li data-order="7"><a href="/doc/technical-issues.html">Technical Issues <br />  </a></li>
        
            
            <li data-order="5"><a href="/doc/immediate-files3.html">Immediate Files <br /> <small>Progress</small> </a></li>
        
            
            <li data-order="4"><a href="/doc/immediate-files2.html">Immediate Files <br /> <small>Design</small> </a></li>
        
            
            <li data-order="3"><a href="/doc/immediate-files.html">Immediate Files <br /> <small>Problem Statement</small> </a></li>
        
            
            <li data-order="8"><a href="/doc/conclusion.html">Conclusion <br />  </a></li>
        
            
            <li data-order="2"><a href="/doc/VFS-Introduction.html">VFS Introduction <br />  </a></li>
        
            
            <li data-order="1"><a href="/doc/Minix-Intro.html">Minix Introduction <br />  </a></li>
        
    
        
        

        
    
        
        

        
            
                <li class=nav-header>Reference</li>
            
            <li data-order="2"><a href="/ref/resource.html">Resources <br />  </a></li>
        
            
            <li data-order="3"><a href="/ref/message.html">Message Passing in MINIX <br />  </a></li>
        
            
            <li data-order="1"><a href="/ref/install.html">Minix installation <br />  </a></li>
        
    
        
        

        
    
        
        

        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class=divider></li> first to break up the content. -->
</ul>

                    </div>

                    <div id=content class=span10>
                        <div class=page-header>
    <h2>Minix installation
        
    </h2>
</div>

<p>This article will help you in setting up Minix 3 using VirtualBox on a Linux Host for development and enabling ssh connection between Minix and host Linux machine.</p>

<p>Teststed with Ubuntu 13.04, Arch Linux. </p>

<h3 id="downloading-minix-3">Downloading Minix 3</h3>

<p>Download Minix 3 from the official website.</p>

<p><a href="http://www.minix3.org/download/">Official download page</a><br>
Note: I used the Minix version 3.2.1 (~256 MB), Minix 3.1 versions have some issues with VirtualBox installation so please use a version &gt; 3.2 .</p>

<h3 id="creating-a-new-virtualbox-image">Creating a new VirtualBox Image</h3>

<ul>
<li>Make sure you have a VirtualBox installed in your system.</li>
<li>Open VirtualBox -&gt; Click on the New button(top left).</li>
<li>Select the type and version as &quot;other&quot;, name the virtualbox image &quot;minix&quot;.</li>
<li>Click next, allot a RAM ( 512 MB).</li>
<li>Create a virtual hard disk ( preferably VDI, dynamic size, 1 GB).</li>
</ul>

<h3 id="installing-minix-3">Installing Minix 3</h3>

<ul>
<li>Assuming you have downloaded and decompressed a MINIX 3 ISO image, attach the ISO file to VirtualBox:</li>
<li>In VirtualBox, select minix on the list on the left.</li>
<li>In the menu on the right, press CD/DVD-ROM.</li>
<li>In the next menu, tick Mount CD/DVD Drive, and select ISO Image File.</li>
<li>Browse, select the .iso Minix image we downloaded earlier and press OK</li>
<li>Now boot the newly created virtual Image minix by clicking on the start button.</li>
<li>Select Option 1 for installation and press ENTER.</li>
<li>When the login prompt appears, login as root, press Enter when prompted for a password.</li>
</ul>

<p>To start installation type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">setup
</code></pre></div>
<p>After this and all other commands, be sure to type ENTER (RETURN). When the installation script ends a screen with a colon, hit ENTER to continue.</p>

<h5 id="select-keyboard-type">Select keyboard type</h5>

<p>When you are asked to select your national keyboard, do so. This and other steps have a default choice, in square brackets. If you agree with it, just hit ENTER. In most steps, the default is generally a good choice for beginners. The us-swap keyboard interchanges the CAPS LOCK and CTRL keys, as is conventional on UNIX systems.</p>

<h5 id="create-or-select-a-partition-for-minix">Create or select a partition for MINIX</h5>

<p>You will first be asked if you are an expert in MINIX disk partitioning. If so, you will be placed in the part program to give you full power to edit the Master Boot Record (and enough rope to hang yourself). If you are not an expert, press ENTER for the default action, which is an automated step-by-step guide to formatting a disk partition for MINIX.</p>

<h5 id="select-a-disk">Select a disk</h5>

<p>An IDE controller may have up to four disks. The setup script will now look for each one. Just ignore any error messages. When the drives are listed, select one. and confirm your choice.<br>
If you have two hard disks and you decide to install MINIX to the second one and have trouble booting from it, see Installation Troubleshooting.</p>

<h5 id="select-a-disk-region">Select a disk region</h5>

<p>Now choose a region to install MINIX into. You have three choices:</p>

<p>Select a free region
Select a partition to overwrite
Delete a partition to free up space and merge with adjacent free space
For choices (1) and (2), type the region number. For (3) type:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">delete
</code></pre></div>
<p>then give the region number when asked. This region will be overwritten and its previous contents lost forever.</p>

<h5 id="confirm-your-choices">Confirm your choices</h5>

<p>You have now reached the point of no return. You will be asked if you want to continue. If you do, the data in the selected region will be lost forever. If you are sure, type:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">yes
</code></pre></div>
<p>and then ENTER. To exit the setup script without changing the partition table, hit CTRL-C.</p>

<h5 id="reinstall-choice">Reinstall choice</h5>

<p>If you chose an existing MINIX partition, in this step you will be offered a choice between a Full install, which erases everything in the partition, and a Reinstall, which does not affect your existing /home partition. This design means that you can put your personal files on /home and reinstall a newer version of MINIX when it is available without losing your personal files.</p>

<h5 id="select-the-size-of-/home">Select the size of /home</h5>

<p>The selected partition will be divided into three subpartitions: root, /usr, and /home. The latter is for your own personal files. Specify how much of the partition should be set aside for your files. You will be asked to confirm your choice.</p>

<h5 id="select-a-block-size">Select a block size</h5>

<p>Disk block sizes of 1-KB, 2-KB, 4-KB, and 8-KB are supported, but to use a size larger than 4-KB you have to change a constant and recompile the system. Use the default (4 KB) here.</p>

<h5 id="wait-for-files-to-be-copied">Wait for files to be copied</h5>

<p>Files will be automatically copied from the CD-ROM to the hard disk. Every file will be announced as it is copied.</p>

<h5 id="select-your-ethernet-chip">Select your Ethernet chip</h5>

<p>You will now be asked which (if any) of the available Ethernet drivers you want installed. Network settings can be changed after installation. 
Since we are using VirtualBox select &quot;AMD LANCE&quot; (option 8) as your Ethernet driver, VirtualBox is capable of emulating AMD LANCE and it has nothing to do with your computers network card.</p>

<h5 id="restart">Restart</h5>

<p>When the copying is complete, MINIX is installed. Shut the system down by typing:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">shutdown
</code></pre></div>
<p>You can now remove/unmount the iso image that we attached to virtual machine(so that it wont again boot into the installation ISO). When you boot up again, you will be running MINIX.</p>

<h3 id="enable-ssh-with-host-machine">Enable Ssh with host machine</h3>

<p>Enabling ssh in minix and host is good option so that you can access Minix source files in host Linux machine.<br>
To enable ssh in the guest minix operating system you have to install openssh in MINIX and in your host machine.</p>

<h5 id="making-virtualbox-to-listen-for-a-particular-port-(port-forwarding)">Making VirtualBox to listen for a particular port (Port forwarding)</h5>

<p>We will have to change some settings in virtualbox using VBoxManage(a commandline tool to tweak virtualbox settings)<br>
It is important that you chose a port number larger than 1024 for host since administrative right is required by virtualbox to listen for ports below 1024 (here we choose 2222). Also note that using port 22 will only result in looping back into your own system.
<br /><br>
In you host operating systems terminal (Linux terminal) type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">VBoxManage modifyvm &quot;minix&quot; --natpf1 &quot;guestssh,tcp,,2222,,22&quot;
</code></pre></div>
<p>&quot;guestssh&quot; is just a name for the port forwarding rule. &quot;minix&quot; - name of the virtualbox image </p>

<h5 id="set-a-password-for-root-account-in-minix">Set a password for root account in Minix</h5>

<p>In minix machine you will have to set a password for root user.A password for the root user can be set using the command </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">passwd   
</code></pre></div>
<p>Now enter a desired password for the root account</p>

<h3 id="installing-openssh-in-minix">Installing openssh in MINIX</h3>

<p>Restart your virtualBox application. Boot into minix and install openssh.
<br /><br>
<strong>Method 1, using pkgin and internet ftp access required</strong>
<br />
You can install openssh using pkgin 
<br />
Update pkgin type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">pkgin update    
</code></pre></div>
<p>Install openssh type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">pkgin install openssh
</code></pre></div>
<p><strong>Method 2, using installation iso as a source (Internet not required)</strong><br>
Many packages are available directly from the CD. This can be helpful in some circumstances, and is generally faster than downloading from the online repository.<br>
To install packages from the CD, you can use pkgin_cd. This command uses the CD-ROM as the package repository. It is a wrapper for pkgin and therefore supports the same commands.<br>
While your virtual image is running you can attach your iso disk to minix.To do so please click on the Devices menu that you see in the VitualBox window, select the minix installation iso and load it(this disk will be used as source for the software package).
<br /><br>
To install openssh type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">pkgin_cd install openssh
</code></pre></div>
<p><strong>Starting SSh daemon</strong><br>
When you have successfully installed openssh start the ssh daemon in minix type(starting ssh will create your keys),</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sh /usr/pkg/etc/rc.d/sshd start
</code></pre></div>
<p>Make sure that ssh daemon is running in minix type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ps -ax | grep ssh
</code></pre></div>
<h5 id="now-come-back-to-linux-terminal-(host-terminal)">Now come back to Linux Terminal (host terminal)</h5>

<p>Check if ssh is running in your host machine,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ps aux | grep ssh
</code></pre></div>
<p>If not please install and enable ssh(depends on your distro)<br>
Ubuntu / Debian users</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo apt-get install openssh-server 
sudo start ssh
</code></pre></div>
<p>Arch Linux users</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo pacman -S openssh-server
sudo systemctl start sshd   
</code></pre></div>
<p>To ssh into minix from host machine type,</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ssh -l root -p 2222 localhost 
</code></pre></div>
<p>Enter your minix password.<br>
<br /> 
Links:<br>
<a href="http://wiki.minix3.org/en/UsersGuide">Users Guide</a></p>


                    </div>
                
            </div>
<!--
            <div class=row-fluid>
                <div id=footer class=span12>
                    Documentation for <a href="https://github.com/sudev/MinixMajor">Experiments with Minix Operating System</a>

                </div>
            </div>
 -->       </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
    </body>
</html>
